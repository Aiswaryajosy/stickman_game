<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stickman Jumper Game</title>
  <style>
    body { margin: 0; background: #111; overflow: hidden; color: white; font-family: Arial, sans-serif; text-align: center; }
    canvas { display: block; margin: auto; background: linear-gradient(#87CEEB, #ffffff); border: 3px solid #444; }
    #scorePanel { position: absolute; top: 10px; left: 10px; font-size: 20px; }
    #gameOverScreen { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #222; padding: 30px; border-radius: 15px; box-shadow: 0 0 15px #000; }
    button { padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <div id="scorePanel">
    Score: <span id="score">0</span> | High Score: <span id="highScore">0</span>
  </div>
  <canvas id="gameCanvas" width="600" height="300"></canvas>
  <div id="gameOverScreen">
    <h1>Game Over</h1>
    <p>Your Score: <span id="finalScore">0</span></p>
    <button onclick="restartGame()">Play Again</button>
  </div>
  <audio id="jumpSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_a84f32374f.mp3?filename=jump-14649.mp3"></audio>
  <audio id="gameOverSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4c9b4a30d2.mp3?filename=video-game-death-sound-13244.mp3"></audio>
  <audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2022/08/08/audio_f5786b7291.mp3?filename=happy-advertising-background-music-115290.mp3" autoplay loop></audio>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreElem = document.getElementById('score');
    const highScoreElem = document.getElementById('highScore');
    const finalScoreElem = document.getElementById('finalScore');
    const gameOverScreen = document.getElementById('gameOverScreen');
    const jumpSound = document.getElementById('jumpSound');
    const gameOverSound = document.getElementById('gameOverSound');

    let stickman = { x: 50, y: 230, vy: 0, width: 20, height: 40, onGround: true };
    let basePlatform = { x: 0, y: 270, width: canvas.width, height: 30 };
    let obstacles = [];
    let gravity = 0.8;
    let jumpForce = -12;
    let gameSpeed = 3;
    let score = 0;
    let highScore = 0;
    let gameRunning = true;

    document.addEventListener('keydown', (e) => {
      if ((e.code === 'Space' || e.code === 'ArrowUp') && stickman.onGround && gameRunning) {
        stickman.vy = jumpForce;
        stickman.onGround = false;
        jumpSound.play();
      }
    });

    canvas.addEventListener('click', () => {
      if (stickman.onGround && gameRunning) {
        stickman.vy = jumpForce;
        stickman.onGround = false;
        jumpSound.play();
      }
    });

    function drawStickman(x, y) {
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      // head
      ctx.beginPath();
      ctx.arc(x + 10, y - 10, 10, 0, Math.PI * 2);
      ctx.stroke();
      // body
      ctx.beginPath();
      ctx.moveTo(x + 10, y);
      ctx.lineTo(x + 10, y + 25);
      ctx.stroke();
      // arms
      ctx.beginPath();
      ctx.moveTo(x + 10, y + 10);
      ctx.lineTo(x - 5, y + 15);
      ctx.moveTo(x + 10, y + 10);
      ctx.lineTo(x + 25, y + 15);
      ctx.stroke();
      // legs
      ctx.beginPath();
      ctx.moveTo(x + 10, y + 25);
      ctx.lineTo(x, y + 40);
      ctx.moveTo(x + 10, y + 25);
      ctx.lineTo(x + 20, y + 40);
      ctx.stroke();
    }

    function spawnObstacle() {
      let height = 15 + Math.random() * 10;
      let width = 20 + Math.random() * 20;
      obstacles.push({ x: canvas.width, y: basePlatform.y - height, width, height });
    }

    function update() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Base platform
      ctx.fillStyle = '#333';
      ctx.fillRect(basePlatform.x, basePlatform.y, basePlatform.width, basePlatform.height);

      // Clouds
      ctx.fillStyle = '#fff';
      for (let i = 0; i < 3; i++) ctx.beginPath(), ctx.arc(i * 200 + score % 200, 60, 30, 0, Math.PI * 2), ctx.fill();

      // Stickman physics
      stickman.vy += gravity;
      stickman.y += stickman.vy;
      if (stickman.y > basePlatform.y - stickman.height) {
        stickman.y = basePlatform.y - stickman.height;
        stickman.vy = 0;
        stickman.onGround = true;
      }

      drawStickman(stickman.x, stickman.y);

      // Obstacles
      for (let i = 0; i < obstacles.length; i++) {
        let obs = obstacles[i];
        obs.x -= gameSpeed;
        ctx.fillStyle = '#FF1493';
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);

        // Collision detection
        if (
          stickman.x < obs.x + obs.width &&
          stickman.x + stickman.width > obs.x &&
          stickman.y + stickman.height > obs.y
        ) {
          gameOver();
          return;
        }
      }

      obstacles = obstacles.filter(obs => obs.x + obs.width > 0);

      // Update score
      score++;
      scoreElem.textContent = score;
      if (score > highScore) {
        highScore = score;
        highScoreElem.textContent = highScore;
      }

      requestAnimationFrame(update);
    }

    function gameOver() {
      gameRunning = false;
      gameOverSound.play();
      finalScoreElem.textContent = score;
      gameOverScreen.style.display = 'block';
    }

    function restartGame() {
      obstacles = [];
      score = 0;
      stickman.y = basePlatform.y - stickman.height;
      stickman.vy = 0;
      gameSpeed = 3;
      gameOverScreen.style.display = 'none';
      gameRunning = true;
      update();
    }

    setInterval(spawnObstacle, 2000);
    update();
  </script>
</body>
</html>
